<!--Ajax + JQuery + Django-->
<script>
    $.ajax({
        url: "{% url 'ajax_carregar_categorias' %}",
        type: 'GET',
        dataType: 'json',
        success: function(data) {
            // 3. Em caso de sucesso, processa a resposta
            console.log("Categorias recebidas:", data);

            const select = $("#select-categorias");

            // Limpa o select antes de adicionar as novas opções
            select.empty();
            select.append('<option value="">-- Selecione uma categoria --</option>');

            // Itera sobre a lista de categorias recebidas
            $.each(data, function(index, categoria){
                // Cria uma nova tag <option> e a adiciona ao select
                    select.append(
                        $('<option>', {
                                value: categoria.id,
                            text: categoria.nome
                        })
                    );
            });
        },
            error: function(xhr, status, error) {
                // 4. Em caso de erro, exibe uma mensagem no console
                console.error("Ocorreu um erro:", error);
                alert("Não foi possível carregar as categorias.");
            }
    });
</script>